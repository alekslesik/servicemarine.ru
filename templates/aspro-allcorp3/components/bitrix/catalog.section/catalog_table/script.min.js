$(document).on("change","input#check_all_item",(function(){const buyItemsCount=$(".catalog-table__item .to_cart").length;$(this).is(":checked")&&buyItemsCount?($(".opt_action").addClass("animate-load").removeClass("no-action"),$(".opt_action .opt-buy__item-text").remove(),$('<div class="opt-buy__item-text">(<span>'+buyItemsCount+"</span>)</div>").appendTo($(".opt_action[data-action=buy]")),$('input[name="check_item"]').prop("checked","checked")):($(".opt_action").addClass("no-action"),$(".opt_action").removeClass("animate-load"),$(".opt_action .opt-buy__item-text").remove(),$('input[name="check_item"]').prop("checked",""))})),$(document).on("change","input[name='check_item']",(function(){const _this=$(this);_this.is(":checked")?$(".opt_action").each((function(){const _this=$(this);if(_this.find(".opt-buy__item-text").length){let count=parseInt(_this.find(".opt-buy__item-text span").text());_this.find(".opt-buy__item-text span").text(++count)}else _this.removeClass("no-action"),_this.addClass("animate-load"),$('<div class="opt-buy__item-text">(<span>1</span>)</div>').appendTo(_this)})):$(".opt_action").each((function(){const _this=$(this);if(_this.find(".opt-buy__item-text").length){let count=parseInt(_this.find(".opt-buy__item-text span").text());--count,_this.find(".opt-buy__item-text span").text(count),count||(_this.addClass("no-action"),_this.removeClass("animate-load"),_this.find(".opt-buy__item-text").remove())}}))})),$(document).on("click",".opt_action",(function(){const _this=$(this),action=_this.data("action"),basketParams={type:"multiple",ajaxPost:"Y",iblock_id:_this.data("iblock_id"),action:action,items:[]};_this.hasClass("no-action")||setTimeout((function(){var items2add=[];$(".catalog-table__item").each((function(){const _this=$(this),canBuy=_this.find(".btn-actions .to_cart").length,add=_this.find('input[name="check_item"]').is(":checked")&&canBuy;if(add){items2add.push(_this.find(".catalog-table__info")[0]);const obj=_this.find(".catalog-table__info").data("item");let quantityInput=_this.find(".counter__count").val()||1;if(obj.QUANTITY=+quantityInput,basketParams.items.push(obj),"object"===typeofExt(arBasketItems)||"array"===typeofExt(arBasketItems))if("undefined"===typeofExt(arBasketItems[obj.ID]))arBasketItems[obj.ID]={ID:obj.ID,QUANTITY:obj.QUANTITY};else{const quantity=+arBasketItems[obj.ID].QUANTITY;arBasketItems[obj.ID].QUANTITY=quantity+obj.QUANTITY}}}));var bBasketTop=void 0!==arAsproOptions.THEME.ORDER_BASKET_VIEW&&"HEADER"===$.trim(arAsproOptions.THEME.ORDER_BASKET_VIEW)&&$(".basket.top").length,bBasketFly=void 0!==arAsproOptions.THEME.ORDER_BASKET_VIEW&&!bBasketTop&&$(".basket.fly").length;basketParams.items.length&&$.ajax({url:arAsproOptions.SITE_DIR+"include/footer/basket.php",type:"POST",data:basketParams}).done((function(html){bBasketTop?$(".ajax_basket").replaceWith(html):bBasketFly&&$(".ajax_basket").html($($.trim(html)).html()),"undefined"==typeof JNoticeSurface?bBasketTop?($(".header-cart").addClass("opened"),"undefined"!=typeof headerCartHideTimer&&clearTimeout(headerCartHideTimer),headerCartHideTimer=setTimeout((function(){$(".header-cart").removeClass("opened")}),2e3)):bBasketFly&&setTimeout((function(){$(".ajax_basket").hasClass("opened")||$(".ajax_basket").addClass("opened")}),50):JNoticeSurface.get().onAdd2cart(items2add);var eventdata={action:"loadBasket"};BX.onCustomEvent("onCompleteAction",[eventdata,$(html)]),setBasketItemsClasses()}))}),0)})),$(document).ready((function(){if(!location.hash&&("scrollRestoration"in history&&(history.scrollRestoration="manual"),"undefined"!=typeof arAsproOptions&&arAsproOptions.OID)){let url,oid;BX.browser.IsIE()?(url=parseUrlQuery(),oid=arAsproOptions.OID?url[arAsproOptions.OID]:null):(url=new URL(window.location),oid=arAsproOptions.OID?url.searchParams.get(arAsproOptions.OID):null),oid&&scrollToBlock('[data-id="'+oid+'"]')}})),BX.addCustomEvent("onCompleteAction",(function(eventdata){"ajaxContentLoaded"===eventdata.action&&"object"==typeof window.tableScrollerOb&&window.tableScrollerOb&&window.tableScrollerOb.toggle()}));
//# sourceMappingURL=script.min.js.map